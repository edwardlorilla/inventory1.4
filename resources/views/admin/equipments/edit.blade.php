@extends('layouts.app')@section('htmlheader_title', 'Create Equipment') @section('css') {!! Html::style('css/parsley.min.css') !!} {!! Html::style('css/jquery.dataTables.min.css') !!} {!! Html::style('css/bootstrap-spinner.css') !!} {!! Html::style('css/buttons.dataTables.min.css') !!}{!! Html::script('js/jquery-1.12.4.min.js') !!} @endsection @section('contentheader_title', 'Setting')@section('main-content')<div class="col-md-{{$equipments->consumable == 0 ?'12':'6'}}"><div class="box box-primary"><div class="box-header with-border"><h3 class="box-title">Edit Equipment</h3></div> {!! Form::model($equipments, ['method'=>'PATCH', 'action'=>['AdminEquipmentController@update', $equipments->id] , 'files'=>true, 'data-parsley-validate' => ''] ) !!}<div class="box-body"><div class="form-group"> {!! Form::label('item', ucfirst('title:')) !!} {!! Form::text('item', null, ['class'=>'form-control', 'required' => '' , Auth::user()->id != $equipments->user->id ? 'disabled' : '' ]) !!}</div><div class="form-group"> {!! Form::label('category_id', ucfirst('Categories:')) !!} {!! Form::select('category_id', $categories,null, ['class'=>'form-control', 'required' => '' , Auth::user()->id != $equipments->user->id ? 'disabled' : '' ])!!}</div><div class="form-group"> {!! Form::label('description', ucfirst('body:')) !!} {!! Form::textarea('description', null, ['class'=>'form-control', 'required' => '', 'rows'=>3 , Auth::user()->id != $equipments->user->id ? 'disabled' : '' ]) !!}</div><div class="form-group"> {!! Form::label('status', ucfirst('status:')) !!} {!! Form::select('status', array(1=>'Available'),0, ['class'=>'form-control', 'required' => '' , Auth::user()->id != $equipments->user->id ? 'disabled' : '' ])!!}</div><div class="form-group"> {!! Form::label('photo_id', ucfirst('photo:')) !!} {!! Form::file('photo_id',null, ['class'=>'form-control', 'required' => '' , Auth::user()->id != $equipments->user->id ? 'disabled' : '' ]) !!}</div> @if($equipments->nonconsumable)<div class="form-group"> {!! Form::label('nonconsumable_id', ucfirst('Quantity:')) !!} {!! Form::number('nonconsumable',$equipments->nonconsumable->quantity,['class'=>'form-control', 'required' => '', 'min' => 1] ) !!}</div>@endif {!! Form::hidden('user_id', null, ['class'=>'form-control']) !!} {!! Form::hidden('nonconsumable_id', null, ['class'=>'form-control']) !!} {!! Form::hidden('consumable', 0, ['class'=>'form-control']) !!} @if($equipments->nonconsumable) {!! Form::hidden('hasQuantity', 1, ['class'=>'form-control']) !!} @endif @if(!$equipments->nonconsumable) {!! Form::hidden('hasQuantity', 0, ['class'=>'form-control']) !!} @endif{!! Form::hidden('outOfStock',0, ['class'=>'form-control']) !!}</div> @include('partial.error')<div class="box-footer"><div class="box-footer"> {!! Form::submit('Update Equipments ', ['class'=>'btn btn-info pull-right']) !!}</div></div> {!! Form::close() !!}</div></div><div class="row"> @if(!$equipments->consumable == 0)<div class="col-md-6"><div class="nav-tabs-custom"><ul class="nav nav-tabs"><li class="pull-left header"><i class="fa fa-th"></i></li><li class="active"><a href="#tab_1" data-toggle="tab"><i class='fa fa-bookmark'></i> Consumables <span class="label label-primary">{{$equipments->borrows()->count()}}</span></a></li><li><a href="#tab_2" data-toggle="tab"><i class='fa fa-barcode'></i> Stock ins <span class="label label-info">{{$equipments->stockins()->count()}}</span></a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab_1"><div class="box-header with-border"><h1 class="box-title">{{$equipments->item}} History <small>{{$equipments->borrows()->count()}} users</small></h1></div><div class="box-body"><table id="firm_table2" class="table table-bordered table-striped"><thead><tr><th class="no">#</th><th class="add">Borrowed by</th><th class="Equipments">Equipments - Quantity</th><th>Date/Time</th></tr></thead><tbody>@foreach($equipments->borrows as $borrow)<tr><th>{{$borrow->id}}</th><td> <a href="{{route('admin.users.edit', $borrow->borrowedby_id)}}">{{$borrow->borrowedby_id == 0 ? 'no user' :$borrow->borrowedby->name}}</a></td><td>@foreach($borrow->equipments as $nonconsumables)<span class="label label-default" id="{{$nonconsumables->id}}" value="{{$nonconsumables->name}}">{{$nonconsumables->item}} - {{$nonconsumables->stockin->deduction}}</span> @endforeach</td><td>{{$borrow->created_at->toDayDateTimeString()}}</td></tr> @endforeach</tbody><tfoot></tfoot></table></div></div><div class="tab-pane" id="tab_2"><div class="box-header with-border"><h1 class="box-title">{{$equipments->item}} History <small>{{$equipments->stockins()->count()}} Stock ins</small></h1></div><div class="box-body"><table id="firm_table2" class="table table-bordered table-striped"><thead><tr><th class="no">#</th><th class="add">Equipments</th><th class="Equipments">Quantity</th><th>Previous Quantity</th><th>Date</th></tr></thead><tbody>@foreach($equipments->stockins as $equipment)<tr><th>{{$equipment->id}}</th><td>{{$equipment->equipment->item}}</td><td><strong>{{$equipment->quantity}}</strong></td><td>{{$equipment->previousQuantity}}</td><td>{{$equipment->created_at->toDayDateTimeString()}}</td></tr> @endforeach</tbody><tfoot></tfoot></table></div></div></div></div></div>@endif</div>@endsection @section('sc') {!! Html::script('js/parsley.min.js') !!} {!! Html::script('js/jszip.min.js') !!} {!! Html::script('js/pdfmake.min.js') !!} {!! Html::script('js/vfs_fonts.js') !!} {!! Html::script('js/buttons.html5.min.js') !!} {!! Html::script('js/dataTables.buttons.min.js') !!} {!! Html::script('js/jquery.dataTables.min.js') !!} <script>$(function(){var tdate=new Date();var dd=tdate.getDate();var MM=tdate.getMonth();var yyyy=tdate.getFullYear();var d=dd+"-"+(MM+1)+"-"+yyyy;$('#firm_table2').DataTable({"paging":true,dom:'Bfrtip',buttons:['copyHtml5',{extend:'excelHtml5',text:'Excel',title:d+' Equipment',customize:function(xlsx){var sheet=xlsx.xl.worksheets['sheet1.xml'];$('row:first c',sheet).attr('s','42');}},'csvHtml5','pdfHtml5']});});</script> @endsection